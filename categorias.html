<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/logos/paint-palette_7768081 2.png" type="image/x-icon">

    <!--icono-->
    <title>Artistas de Valencia</title>

    <link rel="stylesheet" href="categorias.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;700&family=Montserrat:wght@300;700&family=Playfair+Display:wght@300;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Encabezado -->

    <header style="background-image: url(ImagenesFondo/Home.png) " height= 100px></header>



    <!-- Navegación -->
    <nav>
        <ul>
            <li><a href="#Artesanos">Artesanos</a></li>
            <li><a href="#Musicos">Músicos</a></li>
            <li><a href="#Tatuadores">Tatuadores</a></li>
        </ul>

    </nav>


    <!-- Contenedor principal -->


    <!-- Contenido principal -->


    <div class="main-container">


        <!-- Barra lateral -->
        <br>
        <h3>Bienvienidos a Artistas de Valencia</h3>
        </br>
        <p class="texto-superior">Sumérgete en un espacio donde el arte cobra vida. Aquí, cada obra cuenta una historia,
            cada trazo refleja
            una emoción y cada color despierta una sensación única.
        </p>
        <p>Explora nuestra galería, descubre el talento detrás de cada pieza y conecta con artistas apasionados que
            transforman ideas en arte.
        <h4>Inspírate, explora y comparte la creatividad.</h4>

        <button id="formulario" onclick="window.location.href='formularioPerfil.html'">
            <h3>Añadir artista </h3>
        </button>
    </div>

    <section id="Artesanos">
        <section class="Artesanos">
            <h2> Artesanos</h2>
        </section>

        <section class="tarjetas">

            <div class="tarjeta">

                <img src="imgDaniela/danielaPortada.png" alt="Imagen centrada" class="imagen">

                <div class="nombre-artista">
                    <h3> Daniela Chinchilla </h3>
                </div>
                <p class="categoria">Artesanos</p>
                <p>Estudió en la UPV el grado Bellas Artes.
                    Es una artista multidisciplinaria y actualmente se dedica a la creación de piezas con material
                    biodegradable.</p>

                <a href="perfilDaniela.html">Explora su arte</a>
            </div>

            <div class="tarjeta">

                <img src="imgDario/darioPortada.png" alt="Imagen centrada" class="imagen">

                <div class="nombre-artista">
                    <h3> Dario Machin </h3>
                </div>
                <p class="categoria">Artesanos</p>
                <p> Es un artista plástico originario de la isla de Lanzarote, realizó sus estudios de grado en Bellas
                    Artes por la Universidad Complutense de Madrid y posteriormente el máster en Producción Artística
                    por la Universitat Politècnica de València. </p>

                <a href="perfilDario.html">Explora su arte</a>
            </div>
        </section>
    </section>
    <!-- Contenedor músicos -->
    <section id="Musicos">
        <section class="Musicos">
            <h2> Músicos</h2>
        </section>

        <section class="tarjetas">
            <div class="tarjeta">

                <img src="imgAnsiedadCaramelizada/portadaAnsiedadCaramelizada.jpeg" alt="Imagen centrada"
                    class="imagen">
                <div class="nombre-artista">
                    <h3> Ansiedad Caramelizada </h3>
                </div>
                <p class="categoria">Músicos</p>
                <p>Es una banda que busca equilibrio entre lo visceral y lo real. Hacen música que puede ser ruidosa o
                    melódica, pero siempre tienen algo de lo que llevan dentro: momentos de caos, de calma y de todo lo
                    que hay entre medias.</p>

                <a href="perfilAnsiedad.html">Explora su arte</a>
            </div>

            <div class="tarjeta">

                <img src="imgKness/knessPortada.png" alt="Imagen centrada" class="imagen">
                <div class="nombre-artista">
                    <h3> Kness </h3>
                </div>
                <p class="categoria">Músicos</p>
                <p> Es una fusión entre toda música que tenga que ver con el ámbito urbano, trap, rap, detroit, etc. Lo
                    que busca en el mundo urbano es darle una nueva cara y un nuevo aire. Siente que faltan artistas
                    como él, y eso le lanza a querer seguir haciendo música.</p>

                <a href="perfilKness.html">Explora su arte</a>
            </div>
        </section>
    </section>
    <!--Contenedor audiovisual-->
    <section id="Tatuadores">
        <section class="Tatuadores">
            <h2> Tatuadores</h2>
        </section>

        <section class="tarjetas">
            <div class="tarjeta">


                <img src="imgAngie/angiePortada.png" alt="Imagen centrada" class="imagen">
                <div class="nombre-artista">
                    <h3> Angie Grim </h3>
                </div>
                <p class="categoria">Tatuadores</p>
                <p> Tiene un estilo Blackwork concretamente Darkwork que es una rama de dicho estilo que se caracteriza
                    por la temática oscura y tétrica. Siempre le ha gustado todo lo relacionado con las artes oscuras
                    desde pequeña.</p>

                <a href="perfilAngie.html">Explora su arte</a>
            </div>

            <div class="tarjeta">

                <img src="imgGonzalo/gonzaloPortada.jpeg" alt="Imagen centrada" class="imagen">
                <div class="nombre-artista">
                    <h3> Gonzalo </h3>
                </div>
                <p class="categoria">Tatuadores</p>
                <p> Su estilo de tatuaje se inspira en la naturaleza y en lo orgánico, en la sensación de dibujar sin
                    forzar, dejando que la mano y la mente fluyan libremente. Sus líneas se convierten en dibujos que
                    expresan más allá de lo que se ve a simple vista.</p>

                <a href="perfilGonzalo.html">Explora su arte</a>
            </div>
        </section>
    </section>
    </div>


    <!-- Pie de página -->
    <footer>
        <div class="contact-item">
            <img src="logos/llamar.png" alt="Icono" width="30px" />
            <p>634 42 18 46</p>
            <br>
            <img src="logos/correo.png" alt="Icono" width="30px" />
            <p>artistasdevalencia@gmail.com</p>
        </div>


    </footer>
</body>
<script>
    document.addEventListener("DOMContentLoaded", async function () {
        try {
            // Obtener artistas desde el backend
            const response = await fetch("http://localhost:3000/artistas");
            const artistasData = await response.json();

            // Filtrar los artistas por categoría
            const musicos = artistasData.musicos || [];
            const artesanos = artistasData.artesanos || [];
            const tatuadores = artistasData.tatuadores || [];

            // Función para crear tarjetas de artistas
            function crearTarjeta(artista) {
                return `
                <div class="tarjeta">
                    <img src="${artista.profilePhoto}" alt="Imagen de ${artista.name}" class="imagen">
                    <div class="nombre-artista">
                        <h3>${artista.name}</h3>
                    </div>
                    <p class="categoria">${artista.category}</p>
                    <p>${artista.shortInformation}</p>
                    <a href="${artista.links}">Explora su arte</a>
                </div>
            `;
            }

            // Función para guardar artistas en la base de datos
            async function guardarArtistaEnBaseDeDatos(artista) {
                const response = await fetch("http://localhost:3000/addArtista", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({

                        name: artista.name,
                        category: artista.category,
                        profilePhoto: artista.profilePhoto,
                        shortInformation: artista.shortInformation,
                        links: artista.links,
                        information: artista.shortInformation,
                        gallery: []  // Puedes dejarlo vacío si no tienes galerías por el momento
                    })
                });

                if (!response.ok) {
                    console.error(`Error al guardar ${artista.name}:`, response.statusText);
                } else {
                    console.log(`Artista ${artista.name} guardado en MongoDB.`);
                }
            }

            // Insertar artistas en las secciones correspondientes y verificar si ya existen en la base de datos
            const sectionMusicos = document.querySelector("#Músicos .tarjetas");
            const sectionArtesanos = document.querySelector("#Artesanos .tarjetas");
            const sectionTatuadores = document.querySelector("#Tatuadores .tarjetas");

            if (sectionMusicos) {
                // Insertar los músicos
                musicos.forEach(artista => {
                    sectionMusicos.innerHTML += crearTarjeta(artista);
                    // Verificar si el artista ya está en la base de datos
                    const yaExiste = artistasData.musicos.some(a => a.name === artista.name);
                    if (!yaExiste) {
                        guardarArtistaEnBaseDeDatos(artista);
                    }
                });
            } else {
                console.error("No se encontró la sección para músicos.");
            }

            if (sectionArtesanos) {
                // Insertar los artesanos
                artesanos.forEach(artista => {
                    sectionArtesanos.innerHTML += crearTarjeta(artista);
                    // Verificar si el artista ya está en la base de datos
                    const yaExiste = artistasData.artesanos.some(a => a.name === artista.name);
                    if (!yaExiste) {
                        guardarArtistaEnBaseDeDatos(artista);
                    }
                });
            } else {
                console.error("No se encontró la sección para artesanos.");
            }

            if (sectionTatuadores) {
                // Insertar los tatuadores
                tatuadores.forEach(artista => {
                    sectionTatuadores.innerHTML += crearTarjeta(artista);
                    // Verificar si el artista ya está en la base de datos
                    const yaExiste = artistasData.tatuadores.some(a => a.name === artista.name);
                    if (!yaExiste) {
                        guardarArtistaEnBaseDeDatos(artista);
                    }
                });
            } else {
                console.error("No se encontró la sección para tatuadores.");
            }

        } catch (error) {
            console.error("Error en la carga de artistas:", error);
        }
    });



</script>
<script src="categorias.js"></script>

</html>